<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiraCine - Cinema Acessível</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/main.css">
</head>

<body>
      <div id="navbar-container">

      </div>

    <section class="hero" id="hero-section">
        <img src="https://images.unsplash.com/photo-1485846234645-a62644f84728?q=80&w=2000&auto=format&fit=crop"
            alt="Cinema ao ar livre" class="hero-bg">
        <div class="hero-overlay"></div>

        <div class="hero-content">
            <h1 class="hero-title">
                Viva uma experiência <br>
                <span>MIRA</span> de cinema
            </h1>
            <p class="hero-subtitle">
                Um mundo real te aguarda, entre em contato com criadores dos seus filmes favoritos e desfrute dessa
                experiência com seus amigos.
            </p>
            <button class="hero-btn" id="hero-button">Escolha agora o dia!</button>
        </div>
    </section>

    <main class="container">
        <div class="events-page">
            <div class="events-grid">
                <div class="calendar-card">
                    <h2 class="calendar-title">Novembro 2025</h2>

                    <div class="calendar-weekdays">
                        <span>Dom</span>
                        <span>Seg</span>
                        <span>Ter</span>
                        <span>Qua</span>
                        <span>Qui</span>
                        <span>Sex</span>
                        <span>Sáb</span>
                    </div>

                    <div class="calendar-days" id="calendar-days">
                      
                    </div>
                </div>

                <div class="event-card" id="main-event-card">
                    
                </div>
            </div>
        </div>
    </main>

  
      <div id="footer-container">

      </div>

    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <div>
                    <h2 class="modal-title" id="modal-title">Selecione sua Necessidade</h2>
                    <p class="modal-subtitle" id="modal-subtitle">BABILÔNIA</p>
                </div>
                <button class="modal-close" id="modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-content">
                <div class="modal-step active" id="step-1">
                    <div class="accessibility-options">
                        <div class="accessibility-option" data-type="hearing">
                            <div class="accessibility-icon">
                                <i class="fas fa-deaf"></i>
                            </div>
                            <div>
                                <h3 class="accessibility-title">Deficiência Auditiva</h3>
                                <p class="accessibility-desc">Habilita intérprete de LIBRAS e legendas descritivas no
                                    seu dispositivo.</p>
                            </div>
                        </div>

                        <div class="accessibility-option" data-type="visual">
                            <div class="accessibility-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div>
                                <h3 class="accessibility-title">Deficiência Visual</h3>
                                <p class="accessibility-desc">Habilita audiodescrição sincronizada e interface de alto
                                    contraste.</p>
                            </div>
                        </div>
                    </div>
                </div>

    
                <div class="modal-step" id="step-2">
                    <div class="seats-container">
                        <div class="screen">
                            <span class="screen-label">Tela</span>
                        </div>

                        <div class="seats-grid" id="seats-grid">
                            
                        </div>

                        <div class="seat-legend">
                            <div class="legend-item">
                                <div class="legend-color legend-available"></div>
                                <span>Disponível</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color legend-selected"></div>
                                <span>Selecionado</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color legend-priority"></div>
                                <span>Prioritário</span>
                            </div>
                        </div>

                        <button class="confirm-seat-btn" id="confirm-seat-btn" disabled>
                            Confirmar Assento <span id="selected-seat-text"></span>
                        </button>
                    </div>
                </div>

          
                <div class="modal-step" id="step-3">
                    <div class="success-container">
                        <div class="qrcode-container">
                            <div class="qrcode">
                                <i class="fas fa-qrcode"></i>
                            </div>
                        </div>

                        <h3 class="success-title">Tudo certo!</h3>
                        <p class="success-desc" id="success-desc">
                            Seu lugar está garantido. Apresente este QR Code na entrada.
                            Os recursos de <span class="highlight" id="accessibility-type-text">LIBRAS/Legendas</span>
                            estarão ativos no seu app automaticamente.
                        </p>

                        <div class="ticket-info">
                            <div class="ticket-row">
                                <span class="ticket-label">Evento</span>
                                <span class="ticket-value" id="ticket-event">BABILÔNIA</span>
                            </div>
                            <div class="ticket-row">
                                <span class="ticket-label">Data</span>
                                <span class="ticket-value" id="ticket-date">Quarta, 7 de Novembro de 2025</span>
                            </div>
                            <div class="ticket-row">
                                <span class="ticket-label">Assento</span>
                                <span class="ticket-value" id="ticket-seat">A1</span>
                            </div>
                            <div class="ticket-row">
                                <span class="ticket-label">Acessibilidade</span>
                                <div class="ticket-accessibility" id="ticket-accessibility">
                                    <i class="fas fa-deaf"></i>
                                    <span>Auditiva</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../js/template.js"></script>

    <script>
        
        const EVENTS = [
            {
                id: 1,
                title: "BABILÔNIA",
                subtitle: "Nova Babilônia + Citadino",
                description: "Um mundo real te aguarda, entre em contato com criadores dos seus filmes favoritos e desfrute dessa experiência com seus amigos.",
                date: "Quarta, 7 de Novembro de 2025",
                time: "18:50",
                location: "Vale do Anhangabaú",
                capacity: "75/90",
                image: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?q=80&w=1000&auto=format&fit=crop",
                tags: ["Cinema", "Ao Ar Livre"]
            },
            {
                id: 2,
                title: "O AUTO DA COMPADECIDA 2",
                subtitle: "Sessão Especial",
                description: "O retorno de João Grilo e Chicó em uma nova aventura emocionante e acessível para todos.",
                date: "Sexta, 9 de Novembro de 2025",
                time: "20:00",
                location: "Parque Ibirapuera",
                capacity: "120/200",
                image: "https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?q=80&w=1000&auto=format&fit=crop",
                tags: ["Cinema", "Estreia"]
            }
        ];

        
        let currentEventId = 1;
        let modalStep = 1;
        let selectedNeedType = null;
        let selectedSeat = null;
        const rows = ['A', 'B', 'C', 'D'];
        const cols = [1, 2, 3, 4, 5, 6, 7, 8];

        
        document.addEventListener('DOMContentLoaded', function () {
            renderCalendar();
            renderMainEvent();
            setupEventListeners();
        });

        
        function setupEventListeners() {
            // Botão do hero
            document.getElementById('hero-button').addEventListener('click', function () {
                document.querySelector('.events-page').scrollIntoView({ behavior: 'smooth' });
            });

            // Modal - fechar
            document.getElementById('modal-close').addEventListener('click', closeModal);
            document.getElementById('modal-overlay').addEventListener('click', function (e) {
                if (e.target === this) {
                    closeModal();
                }
            });

            // Modal - opções de acessibilidade
            document.querySelectorAll('.accessibility-option').forEach(option => {
                option.addEventListener('click', function () {
                    selectedNeedType = this.getAttribute('data-type');
                    goToStep(2);
                });
            });

            // Modal - confirmar assento
            document.getElementById('confirm-seat-btn').addEventListener('click', confirmBooking);
        }

        // Renderizar calendário
        function renderCalendar() {
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';

            // Dias vazios no início do mês
            for (let i = 0; i < 4; i++) {
                calendarDays.innerHTML += '<div class="calendar-day"></div>';
            }

            // Dias 1-6
            for (let day = 1; day <= 6; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day < 10 ? `0${day}` : day;
                calendarDays.appendChild(dayElement);
            }

            // Dia 7 (ativo)
            const day7 = document.createElement('div');
            day7.className = 'calendar-day active';
            day7.textContent = '07';
            day7.addEventListener('click', () => {
                currentEventId = 1;
                renderMainEvent();
            });
            calendarDays.appendChild(day7);

            // Dias 8-30
            for (let day = 8; day <= 30; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                if (day === 9) {
                    dayElement.addEventListener('click', () => {
                        currentEventId = 2;
                        renderMainEvent();
                    });
                }
                calendarDays.appendChild(dayElement);
            }
        }

        // Renderizar evento principal
        function renderMainEvent() {
            const event = EVENTS.find(e => e.id === currentEventId);
            const eventCard = document.getElementById('main-event-card');

            eventCard.innerHTML = `
        <div class="event-poster">
            <img src="${event.image}" alt="${event.title}">
            <div class="event-poster-overlay">
                <h3 class="event-poster-title">${event.title}</h3>
            </div>
        </div>
        <div class="event-details">
            <div>
                <div class="event-header">
                    <h2 class="event-title">${event.title}</h2>
                    <span class="event-tag">${event.tags[0]}</span>
                </div>
                <p class="event-description">${event.description}</p>
                <div class="event-info">
                    <div class="info-item">
                        <i class="fas fa-calendar-alt"></i>
                        <span>${event.date}</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${event.location}</span>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-clock"></i>
                        <span>${event.time}</span>
                    </div>
                </div>
            </div>
            <button class="reserve-btn" id="reserve-btn">
                Reservar Ingresso
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    `;

            // Adicionar listener ao botão de reserva
            document.getElementById('reserve-btn').addEventListener('click', () => {
                openModal(event);
            });
        }

        // Gerar assentos
        function generateSeats() {
            const seatsGrid = document.getElementById('seats-grid');
            seatsGrid.innerHTML = '';

            rows.forEach(row => {
                const rowElement = document.createElement('div');
                rowElement.className = 'seat-row';

                cols.forEach(col => {
                    const seatId = `${row}${col}`;
                    const isPriority = row === 'A';

                    const seatElement = document.createElement('div');
                    seatElement.className = `seat ${isPriority ? 'priority' : ''}`;
                    seatElement.textContent = seatId;
                    seatElement.dataset.seat = seatId;

                    seatElement.addEventListener('click', () => selectSeat(seatId));

                    rowElement.appendChild(seatElement);
                });

                seatsGrid.appendChild(rowElement);
            });
        }

        // Selecionar assento
        function selectSeat(seatId) {
            // Remover seleção anterior
            document.querySelectorAll('.seat.selected').forEach(seat => {
                seat.classList.remove('selected');
            });

            // Selecionar novo assento
            const seatElement = document.querySelector(`.seat[data-seat="${seatId}"]`);
            seatElement.classList.add('selected');
            selectedSeat = seatId;

            // Atualizar botão de confirmação
            const confirmBtn = document.getElementById('confirm-seat-btn');
            confirmBtn.disabled = false;
            document.getElementById('selected-seat-text').textContent = seatId;
        }

        // Confirmar reserva
        function confirmBooking() {
            if (selectedSeat) {
                // Atualizar informações do ticket
                const event = EVENTS.find(e => e.id === currentEventId);
                document.getElementById('ticket-event').textContent = event.title;
                document.getElementById('ticket-date').textContent = event.date;
                document.getElementById('ticket-seat').textContent = selectedSeat;

                const accessibilityType = document.getElementById('ticket-accessibility');
                if (selectedNeedType === 'hearing') {
                    accessibilityType.innerHTML = '<i class="fas fa-deaf"></i><span>Auditiva</span>';
                    document.getElementById('accessibility-type-text').textContent = 'LIBRAS/Legendas';
                } else {
                    accessibilityType.innerHTML = '<i class="fas fa-eye"></i><span>Visual</span>';
                    document.getElementById('accessibility-type-text').textContent = 'Audiodescrição';
                }

                goToStep(3);
            }
        }

        // Abrir modal
        function openModal(event) {
            const modal = document.getElementById('modal-overlay');
            modal.style.display = 'flex';

            // Resetar estado do modal
            modalStep = 1;
            selectedNeedType = null;
            selectedSeat = null;

            // Atualizar título e subtítulo
            document.getElementById('modal-subtitle').textContent = event.title;

            // Gerar assentos
            generateSeats();

            // Resetar assentos selecionados
            document.querySelectorAll('.seat.selected').forEach(seat => {
                seat.classList.remove('selected');
            });

            // Resetar botão de confirmação
            document.getElementById('confirm-seat-btn').disabled = true;
            document.getElementById('selected-seat-text').textContent = '';

            goToStep(1);
        }

        // Fechar modal
        function closeModal() {
            document.getElementById('modal-overlay').style.display = 'none';
        }

        // Navegar entre passos do modal
        function goToStep(step) {
            // Esconder todos os passos
            document.querySelectorAll('.modal-step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });

            // Mostrar passo atual
            document.getElementById(`step-${step}`).classList.add('active');

            // Atualizar título do modal
            const title = document.getElementById('modal-title');
            const event = EVENTS.find(e => e.id === currentEventId);

            switch (step) {
                case 1:
                    title.textContent = "Selecione sua Necessidade";
                    document.getElementById('modal-subtitle').textContent = event.title;
                    break;
                case 2:
                    title.textContent = "Escolha seu Assento";
                    document.getElementById('modal-subtitle').textContent = event.title;
                    break;
                case 3:
                    title.textContent = "Ingresso Confirmado!";
                    document.getElementById('modal-subtitle').textContent = event.title;
                    break;
            }

            modalStep = step;
        }

    </script>
</body>

</html>